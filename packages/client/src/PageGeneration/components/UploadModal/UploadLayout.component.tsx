import { Button, Grid } from "@mui/material";
import { AppBtn } from "../../../components/AppBtn/AppBtn.component";

const svgPreviewItem = (
  <svg width="44px" height="44px" viewBox="0 0 44 44" version="1.1">
    <title>Group 5</title>
    <g
      id="Page-Generation_Queue"
      stroke="none"
      stroke-width="1"
      fill="none"
      fill-rule="evenodd"
    >
      <g
        id="Page_reco_edit_image_uploading"
        transform="translate(-433.000000, -472.000000)"
      >
        <g
          id="Group-5"
          transform="translate(455.000000, 494.000000) rotate(-360.000000) translate(-455.000000, -494.000000) translate(433.000000, 472.000000)"
        >
          <rect
            id="Rectangle"
            fill="#DFEBFF"
            x="0"
            y="0"
            width="44"
            height="44"
            rx="5"
          ></rect>
          <circle
            id="Oval"
            fill="#FFFFFF"
            cx="11.7674419"
            cy="11.7674419"
            r="3.58139535"
          ></circle>
          <path
            d="M6.49905993,23.6906653 L11.4737615,18.4777388 C13.3802022,16.4800038 16.5451619,16.4059952 18.5428969,18.3124359 C18.7087361,18.4706965 18.8634953,18.6401745 19.0060793,18.8196707 L23.8563146,24.9255374 C24.8868727,26.2228869 26.7740148,26.4391641 28.0713644,25.408606 C28.1866552,25.3170239 28.2950474,25.2170785 28.3956622,25.1095801 L29.0949332,24.3624678 C30.7002785,22.6472911 33.3920934,22.5582552 35.1072701,24.1636005 C35.1657048,24.2182934 35.2225842,24.2746246 35.2778404,24.3325268 L38.5241959,27.7343414 C39.4117674,28.6644164 39.9069767,29.9006362 39.9069767,31.1862577 L39.9069767,35.8837209 C39.9069767,37.5405752 38.563831,38.8837209 36.9069767,38.8837209 L8.11627907,38.8837209 C6.45942482,38.8837209 5.11627907,37.5405752 5.11627907,35.8837209 L5.11627907,27.1425815 C5.11627907,25.8569601 5.6114884,24.6207402 6.49905993,23.6906653 Z"
            id="Path-2"
            fill="#FFFFFF"
            transform="translate(22.511628, 26.604651) scale(-1, 1) translate(-22.511628, -26.604651) "
          ></path>
        </g>
      </g>
    </g>
  </svg>
);

const svgUploadPreview = (
  <svg width="44px" height="44px" viewBox="0 0 44 44" version="1.1">
    <title>Group 5</title>
    <g
      id="Page-Generation_Queue"
      stroke="none"
      stroke-width="1"
      fill="none"
      fill-rule="evenodd"
    >
      <g
        id="Page_reco_edit_image_uploading"
        transform="translate(-433.000000, -472.000000)"
      >
        <g
          id="Group-5"
          transform="translate(455.000000, 494.000000) rotate(-360.000000) translate(-455.000000, -494.000000) translate(433.000000, 472.000000)"
        >
          <rect
            id="Rectangle"
            fill="#DFEBFF"
            x="0"
            y="0"
            width="44"
            height="44"
            rx="5"
          ></rect>
          <circle
            id="Oval"
            fill="#FFFFFF"
            cx="11.7674419"
            cy="11.7674419"
            r="3.58139535"
          ></circle>
          <path
            d="M6.49905993,23.6906653 L11.4737615,18.4777388 C13.3802022,16.4800038 16.5451619,16.4059952 18.5428969,18.3124359 C18.7087361,18.4706965 18.8634953,18.6401745 19.0060793,18.8196707 L23.8563146,24.9255374 C24.8868727,26.2228869 26.7740148,26.4391641 28.0713644,25.408606 C28.1866552,25.3170239 28.2950474,25.2170785 28.3956622,25.1095801 L29.0949332,24.3624678 C30.7002785,22.6472911 33.3920934,22.5582552 35.1072701,24.1636005 C35.1657048,24.2182934 35.2225842,24.2746246 35.2778404,24.3325268 L38.5241959,27.7343414 C39.4117674,28.6644164 39.9069767,29.9006362 39.9069767,31.1862577 L39.9069767,35.8837209 C39.9069767,37.5405752 38.563831,38.8837209 36.9069767,38.8837209 L8.11627907,38.8837209 C6.45942482,38.8837209 5.11627907,37.5405752 5.11627907,35.8837209 L5.11627907,27.1425815 C5.11627907,25.8569601 5.6114884,24.6207402 6.49905993,23.6906653 Z"
            id="Path-2"
            fill="#FFFFFF"
            transform="translate(22.511628, 26.604651) scale(-1, 1) translate(-22.511628, -26.604651) "
          ></path>
        </g>
      </g>
    </g>
  </svg>
);

const svgUploadStop = (
  <svg width="24px" height="24px" viewBox="0 0 24 24">
    <title>stop_circle-24px</title>
    <g
      id="Page-Generation_Queue"
      stroke="none"
      stroke-width="1"
      fill="none"
      fill-rule="evenodd"
    >
      <g
        id="Page_reco_edit_image_uploading"
        transform="translate(-976.000000, -482.000000)"
      >
        <g id="stop_circle-24px" transform="translate(976.000000, 482.000000)">
          <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>
          <g
            id="Group"
            transform="translate(2.000000, 2.000000)"
            fill="#DE350B"
            fill-rule="nonzero"
          >
            <rect id="Rectangle" x="6" y="6" width="8" height="8"></rect>
            <path
              d="M10,0 C4.48,0 0,4.48 0,10 C0,15.52 4.48,20 10,20 C15.52,20 20,15.52 20,10 C20,4.48 15.52,0 10,0 Z M10,18 C5.59,18 2,14.41 2,10 C2,5.59 5.59,2 10,2 C14.41,2 18,5.59 18,10 C18,14.41 14.41,18 10,18 Z"
              id="Shape"
            ></path>
          </g>
        </g>
      </g>
    </g>
  </svg>
);

const svgUploadCheck = (
  <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
    <title>check_circle_outline-24px</title>
    <g
      id="Page-Generation_Queue"
      stroke="none"
      stroke-width="1"
      fill="none"
      fill-rule="evenodd"
    >
      <g
        id="Page_reco_edit_image_uploading"
        transform="translate(-976.000000, -558.000000)"
      >
        <g
          id="check_circle_outline-24px"
          transform="translate(976.000000, 558.000000)"
        >
          <polygon id="Path" points="0 0 24 0 24 24 0 24"></polygon>
          <path
            d="M12,2 C6.48,2 2,6.48 2,12 C2,17.52 6.48,22 12,22 C17.52,22 22,17.52 22,12 C22,6.48 17.52,2 12,2 Z M12,20 C7.59,20 4,16.41 4,12 C4,7.59 7.59,4 12,4 C16.41,4 20,7.59 20,12 C20,16.41 16.41,20 12,20 Z M15.88,8.29 L10,14.17 L8.12,12.29 C7.73,11.9 7.1,11.9 6.71,12.29 C6.32,12.68 6.32,13.31 6.71,13.7 L9.3,16.29 C9.69,16.68 10.32,16.68 10.71,16.29 L17.3,9.7 C17.69,9.31 17.69,8.68 17.3,8.29 C16.91,7.9 16.27,7.9 15.88,8.29 Z"
            id="Shape"
            fill="#6FC98B"
            fill-rule="nonzero"
          ></path>
        </g>
      </g>
    </g>
  </svg>
);

const svgUploadIcon = (
  <svg width="74px" height="74px" viewBox="0 0 74 74" version="1.1">
    <title>Group 7</title>
    <g
      id="Page-Generation_Queue"
      stroke="none"
      stroke-width="1"
      fill="none"
      fill-rule="evenodd"
    >
      <g
        id="Page_reco_upload_image"
        transform="translate(-680.000000, -278.000000)"
      >
        <g id="Group-7" transform="translate(680.443282, 278.979932)">
          <g
            id="Group-5"
            transform="translate(36.289591, 36.289591) rotate(-11.000000) translate(-36.289591, -36.289591) translate(5.337296, 5.337296)"
            fill="#DFEBFF"
          >
            <rect
              id="Rectangle"
              transform="translate(30.952295, 30.952295) rotate(-4.000000) translate(-30.952295, -30.952295) "
              x="1.9522952"
              y="1.9522952"
              width="58"
              height="58"
              rx="10"
            ></rect>
          </g>
          <g
            id="Group-5"
            transform="translate(39.889856, 38.627631) rotate(-9.000000) translate(-39.889856, -38.627631) translate(10.889856, 9.627631)"
          >
            <rect
              id="Rectangle"
              fill="#657DA4"
              x="0"
              y="0"
              width="58"
              height="58"
              rx="10"
            ></rect>
            <circle id="Oval" fill="#FFFFFF" cx="15" cy="15" r="5"></circle>
            <path
              d="M7.35502765,32.0883562 L15.6523373,23.2519504 C17.5425859,21.2388877 20.7068449,21.1393273 22.7199076,23.029576 C22.9064072,23.2046976 23.0791914,23.3938746 23.2367379,23.5954405 L31.4615124,34.1182641 C32.481839,35.4236758 34.3672224,35.654783 35.6726341,34.6344564 C35.8012082,34.5339611 35.9213682,34.4231425 36.031918,34.3031036 L38.1285533,32.0265019 C39.9992376,29.9952458 43.1623853,29.8650766 45.1936414,31.7357609 C45.2826349,31.8177195 45.3686244,31.9028811 45.4514402,31.9910775 L50.6449723,37.522046 C51.515455,38.449086 52,39.6729744 52,40.9446439 L52,49 C52,50.6568542 50.6568542,52 49,52 L9,52 C7.34314575,52 6,50.6568542 6,49 L6,35.5109541 C6,34.2392846 6.48454499,33.0153962 7.35502765,32.0883562 Z"
              id="Path-2"
              fill="#FFFFFF"
              transform="translate(29.000000, 35.500000) scale(-1, 1) translate(-29.000000, -35.500000) "
            ></path>
          </g>
        </g>
      </g>
    </g>
  </svg>
);
export const UploadLayout = ({
  input,
  previews,
  submitButton,
  dropzoneProps,
  files,
  extra: { maxFiles }
}) => (
  <div>
    <div {...dropzoneProps}>{files.length < maxFiles && input}</div>

    <div className="preview__container">
      <ul className="preview">{previews}</ul>
    </div>
    {files.length > 0 && submitButton}
  </div>
);

export const Preview = ({ meta }) => {
  const STATUS_DONE = "done";
  const { name, percent, status } = meta;
  return (
    <li className="preview__item">
      <Grid container justifyContent="space-between" alignItems="center">
        <Grid item>
          <div className="preview__img--container">
            {status === STATUS_DONE ? (
              <img
                src="https://via.placeholder.com/44x44"
                alt="preview"
                className="preview__img"
              />
            ) : (
              svgPreviewItem
            )}

            <div className="preview__data">
              <span className="preview__data--name preview__title">{name}</span>
              <span className="preview__data--status preview__info">
                {status}
              </span>
            </div>
          </div>
        </Grid>
        <Grid item>
          <div className="preview__right">
            <span className="preview__info">{Math.round(percent)}%</span>

            <span className="preview__icon">
              {status === STATUS_DONE ? svgUploadCheck : svgUploadStop}
            </span>
          </div>
        </Grid>
      </Grid>
      <div
        style={{ width: `${Math.round(percent)}%` }}
        className="preview__line"
      ></div>
    </li>
  );
};

export const Submit = () => <AppBtn customclass="hide">Envoyer</AppBtn>;

export const Input = ({ accept, onFiles, files, getFilesFromEvent }) => {
  const text = files.length > 0 ? "Add more files" : "Choose files";

  return (
    <div className="input">
      <div className="input__container">
        {svgUploadIcon}
        <p className="input__title">
          Drag & Drop your images here
          <br /> or
        </p>

        <label className="input__action">
          {text}
          <input
            style={{ display: "none" }}
            type="file"
            accept={accept}
            multiple
            onChange={(e) => {
              e.preventDefault();
              getFilesFromEvent(e).then((chosenFiles) => {
                onFiles(chosenFiles);
              });
            }}
          />
        </label>

        <p className="input__txt">
          Support JPG and PNG formats, maximum size 5MB
        </p>
      </div>
    </div>
  );
};
